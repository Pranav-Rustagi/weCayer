<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="imgs/weCayer-logo.png" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>weCayer</title>

    <!-- BOOTSTRAP CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <!-- BOOTSTRAP jQuery and JS bundle w/ Popper.js -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>

    <!-- Google fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Roboto:wght@300;400&family=Courgette&display=swap"
        rel="stylesheet">

    <!-- font swesome -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <!-- custom css -->
    <link rel="stylesheet" href="style.css">

</head>

<body class="h-100" id="accountsPage">

    <!-- Background image -->
    <div id="imageSheet" class="position-fixed"></div>

    <!-- navigation bar -->
    <section class="m-0">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark flex-column">
            <a class="navbar-brand m-0" href="./">
                <img src="imgs/weCayer-logo.png" height="28px" alt="">
                weCayer
            </a>

            <div>
                <ul class="navbar-nav flex-row">
                    <li class="nav-item mr-5" data-target="signup">
                        <a class="nav-link" href="">Sign up</a>
                    </li>
                    <li class="nav-item" data-target="signin">
                        <a class="nav-link pr-0" href="">Sign in</a>
                    </li>
            </div>
        </nav>
    </section>

    <!-- content block -->
    <section id="contentBlock" class="row justify-content-center text-light mx-0">

        <!-- for sign in -->
        <div id="forSignIn" class="col-lg-5 col-md-8 col-sm-10 p-3" data-block="signin">
            <h1 class="display-4 px-3 mb-5 font-weight-normal text-uppercase">Sign IN</h1>
            <form>
                <div class="form-group row m-0 px-3">
                    <label for="email" class="col-sm-4 col-md-3 col-form-label px-0">Email</label>
                    <input type="email" class="form-control col-sm-8 col-md-9" id="email">
                </div>
                <div class="form-group row m-0 px-3 mt-3">
                    <label for="password" class="col-sm-4 col-md-3 col-form-label px-0">Password</label>
                    <input type="password" class="form-control col-sm-8 col-md-9" id="password">
                </div>
                <div class="form-group row m-0 px-3 mt-3">
                    <div class="form-check m-auto">
                        <input class="form-check-input" type="checkbox" id="gridCheck1">
                        <label class="form-check-label" for="gridCheck1">
                            Remember me
                        </label>
                    </div>
                </div>
                <div class="form-group row m-0 px-3 mt-3">
                    <button type="button" id="signInButton" class="btn btn-success m-auto">Sign In</button>
                </div>
            </form>
        </div>

        <!-- for sign up -->
        <div id="forSignUp" class="col-lg-5 col-md-8 col-sm-10 p-3" data-block="signup">
            <h1 class="display-4 px-3 mb-5 font-weight-normal text-uppercase">sign up</h1>
            <form>
                <div>
                    <h1 class="h5 p-3 border-top border-light">Applying for : </h1>
                    <div class="form-group row m-0 px-3 mt-3 flex-column align-items-start">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="applyingFor" id="warrior"
                                value="warrior">
                            <label class="form-check-label" for="warrior">Corona warrior</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="applyingFor" id="helper" value="helper">
                            <label class="form-check-label" for="helper">Helper</label>
                        </div>
                    </div>
                </div>

                <div class="mt-5">
                    <h1 class="h5 p-3 border-top border-light">Basic details : </h1>
                    <div class="form-group row m-0 px-3 mt-3">
                        <label for="name" class="col-sm-4 col-md-3 col-form-label px-0">Full Name</label>
                        <input type="text" class="form-control col-sm-8 col-md-9" id="name">
                    </div>
                    <div class="form-group row m-0 px-3 mt-3">
                        <label for="email" class="col-sm-4 col-md-3 col-form-label px-0">Email ID</label>
                        <input type="email" class="form-control col-sm-8 col-md-9" id="email">
                    </div>
                    <div class="form-group row m-0 px-3 mt-3">
                        <label for="phone" class="col-sm-4 col-md-3 col-form-label px-0">Mobile Number</label>
                        <input class="form-control col-sm-8 col-md-9" type="tel" id="phone">
                    </div>
                    <div class="form-group row m-0 px-3 mt-3">
                        <label for="city" class="col-sm-4 col-md-3 col-form-label px-0">City</label>
                        <input class="form-control col-sm-8 col-md-9" type="text" id="city">
                    </div>
                </div>
                <div class="mt-5">
                    <h1 class="h5 p-3 border-top border-light">Upload files : </h1>
                    <div class="form-group row m-0 px-3 mt-3">
                        <label for="aadhar" class="col-sm-4 col-md-3 col-form-label px-0">Aadhar Card</label>
                        <div class="custom-file col-sm-8 col-md-9">
                            <input type="file" class="custom-file-input" id="aadhar">
                            <label class="custom-file-label">Choose file</label>
                        </div>
                    </div>
                    <div class="form-group row m-0 px-3 mt-3">
                        <label for="aadharNo" class="col-sm-4 col-md-3 col-form-label px-0">Aadhar Number</label>
                        <input class="form-control col-sm-8 col-md-9" type="text" id="aadharNo">
                    </div>
                </div>
                <div class="mt-5">
                    <h1 class="h5 p-3 border-top border-light">Service you provide : </h1>
                    <div class="form-group row m-0 px-3 mt-3">
                        <label for="service" class="col-sm-4 col-md-3 col-form-label px-0">Service</label>
                        <input class="form-control col-sm-8 col-md-9" type="text" id="service">
                    </div>
                </div>
                <div class="mt-5">
                    <h1 class="h5 p-3 border-top border-light">Set password : </h1>
                    <div class="form-group row m-0 px-3 mt-3">
                        <label for="password" class="col-sm-4 col-md-3 col-form-label px-0">Password</label>
                        <input class="form-control col-sm-8 col-md-9" type="password" id="password">
                    </div>
                </div>
                <div class="mt-5">
                    <h1 class="h5 p-3 border-top border-light">I, declare that : </h1>
                    <div class="form-group row m-0 px-3 mt-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                            <label class="form-check-label" for="defaultCheck1">
                                All the details provided by me are correct.
                            </label>
                        </div>
                        <div class="form-check mt-2">
                            <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                            <label class="form-check-label" for="defaultCheck1">
                                I am aware that providing wrong information is a crime
                            </label>
                        </div>
                        <div class="form-check mt-2">
                            <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                            <label class="form-check-label" for="defaultCheck1">
                                I will be responsible if any of the details is found to be incorrect.
                            </label>
                        </div>
                    </div>
                </div>
                <div class="form-group row m-0 px-3 mt-4 justify-content-around">
                    <button class="btn btn-danger w-25" type="button" id="back">Back</button>
                    <button class="btn btn-success w-25" type="button" id="continue">Continue</button>
                </div>
            </form>
        </div>
    </section>

    <script>
        $(window).on('load', () => {
            let firstTemp = location.href.split('?target=')[1];
            var target;
            if (firstTemp)
                target = firstTemp.split("?")[0];

            if (target != "signup" && target != "signin")
                target = "signup";

            $('.nav-item[data-target = ' + target + ']').click();
        })



        $('.nav-item').click(function (event) {
            event.preventDefault()
            $(this).addClass('active').siblings().removeClass('active');
            let target = $(this).data("target");
            $('#contentBlock > div[data-block = ' + target + ']').show().siblings().hide();
            $('#back').hide();
            if (target === 'signin') {
                $('#forSignUp form > div:not(:first-child):not(:last-child)').slideUp()
            }
            $('form').each((ind, el) => {
                el.reset();
            })
        })



        $('#continue').click(function () {
            let parent = $(this).parent();
            let blocks = parent.siblings().filter(':visible');
            let next = blocks.next();

            if (!next.is(parent)) {
                blocks.slideUp('fast', () => {
                    next.slideDown('slow');
                    $('#back').show();
                })
            }
            else {
                let obj = {
                    appliedFor: $("#forSignUp [name=applyingFor]:checked").val(),
                    email: $("#forSignUp #email").val(),
                    phone: $("#forSignUp #phone").val(),
                    aadharNo: $("#forSignUp #aadharNo").val(),
                    password: $("#forSignUp #password").val(),
                    city: $("#forSignUp #city").val(),
                    service: $("#forSignUp #service").val()
                };

                let users = JSON.parse(localStorage.getItem("users"));
                if (users) {
                    if (users[obj.email]) {
                        alert("User already exists!")
                    }
                    else {
                        users[obj.email] = obj;
                        localStorage.setItem("users", JSON.stringify(users));
                        alert("Successfully signed up!");
                        $(this).closest('form')[0].reset();
                        $('.nav-item.active').siblings().click();
                    }
                }
                else {
                    users = {};
                    users[obj.email] = obj;
                    localStorage.setItem("users", JSON.stringify(users));
                    alert("Successfully signed up!");
                    $('.nav-item.active').siblings().click();
                }
            }
        })

        $('#back').click(function () {
            let parent = $(this).parent();
            let blocks = parent.siblings().filter(':visible');
            let prev = blocks.prev();

            blocks.slideUp('fast', () => {
                prev.slideDown('slow');
                if (prev.is(':first-child')) {
                    $('#back').hide();
                }
            })
        })


        $("#signInButton").click(function () {
            let users = JSON.parse(localStorage.getItem("users"));
            let email = $('#forSignIn #email').val();
            if(users[email]){
                let password = users[email].password;
                if(password === $('#forSignIn #password').val()){
                    sessionStorage.setItem("myDetails", JSON.stringify(users[email]));
                    if($('#gridCheck1').is(":checked")){
                        localStorage.setItem("myDetails", JSON.stringify(users[email]));
                    }
                    $(this).closest('form')[0].reset();
                    alert("Successfully logged in")
                    location.replace("./");
                }
                else{
                    alert("Credentials don't match");
                }
            }
            else{
                alert("User not found! Sign up first");
            }
            if (password === "password=" + $("#forSignIn #password").val()) {
                localStorage.setItem("saveDetails", true);
            }
        })



        $('#name').keydown(function (event) {
            let data = event.originalEvent.key;
            let result = (/([A-z]|\s)/g).test(data);
            if (!result) {
                event.preventDefault();
            }
        })


    </script>
</body>

</html>